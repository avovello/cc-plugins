# Claude Code Marketplace Configuration Example
# Copy this to your project as .claude/marketplace-config.yaml

# Global marketplace settings
marketplace:
  # Which plugins are enabled
  plugins:
    investigation: true
    research: true
    review: true
    feature: true
    bugfix: true

  # Default behavior
  defaults:
    use_todos: true           # Use TodoWrite to track progress
    verbose: true             # Detailed output
    max_iterations: 3         # Default max iterations for loops

# Investigation Plugin Configuration
investigation:
  depth: deep                 # surface | medium | deep

  # What to focus on
  focus:
    - architecture
    - dependencies
    - patterns
    - technical_debt
    - security
    - performance

  # Output configuration
  output:
    directory: ./investigation-output
    formats:
      - markdown
    create_diagrams: true     # ASCII/markdown diagrams
    create_onboarding: true   # Developer onboarding guide

  # Analysis depth for each area
  analysis:
    architecture: deep
    dependencies: medium
    patterns: medium
    technical_debt: deep

# Research Plugin Configuration
research:
  depth: moderate             # quick | moderate | deep

  # Research sources
  sources:
    - official_docs
    - community_resources
    - code_examples
    - benchmarks
    - best_practices

  # Comparison criteria for technology evaluation
  comparison_criteria:
    - performance
    - ease_of_use
    - learning_curve
    - community_support
    - maintenance_status
    - ecosystem
    - cost
    - scalability

  # Options
  create_poc: false           # Create proof-of-concept
  deep_dive: false            # Extra detailed research

  output:
    directory: ./research-output
    include_references: true
    include_examples: true

# Review Plugin Configuration
review:
  # Which review perspectives to include
  perspectives:
    code_quality: true
    security: true
    performance: true
    architecture: true
    accessibility: false      # Optional
    seo: false               # Optional

  # Review strictness
  strictness: high            # low | medium | high

  # Review loop configuration
  max_review_iterations: 2
  require_all_resolved: false # Can approve with minor issues

  # Auto-fix capabilities
  auto_fix:
    enabled: true
    types:
      - formatting
      - simple_refactoring
      - style_issues
      - imports_sorting

  # What issues block approval
  blocking_issues:
    - security_critical
    - breaking_changes
    - data_loss_risk

  # Issue severity thresholds
  severity:
    critical:
      max_allowed: 0          # Block if any critical
    high:
      max_allowed: 2          # Allow up to 2 high
    medium:
      max_allowed: 10
    low:
      max_allowed: -1         # Unlimited

  output:
    directory: ./review-reports
    create_summary: true
    create_checklist: true

# Feature Plugin Configuration
feature:
  # Planning phase
  planning:
    max_review_iterations: 2
    require_architecture_review: true
    require_risk_assessment: true

  # Implementation phase
  implementation:
    follow_conventions: true
    create_tests_inline: true

  # Testing phase
  testing:
    max_fix_iterations: 3
    require_full_suite: true
    require_integration_tests: true
    min_coverage: 80          # Minimum test coverage %

  # Review phase
  review:
    max_iterations: 2
    require_security_review: true
    require_performance_review: false
    perspectives:
      - code_quality
      - security

  # Documentation phase
  documentation:
    update_readme: true
    update_changelog: true
    require_api_docs: true
    require_migration_guide_if_breaking: true

  # Deployment preparation
  deployment:
    create_checklist: true
    create_rollback_plan: true
    require_validation_steps: true

  output:
    directory: ./feature-output

# Bugfix Plugin Configuration
bugfix:
  # Reproduction phase
  reproduction:
    max_attempts: 3
    require_test: true        # Must create reproduction test
    capture_state: true       # Capture env/context

  # Analysis phase
  analysis:
    depth: deep               # surface | moderate | deep
    check_similar_bugs: true  # Look for similar issues
    identify_root_cause: true

  # Fixing phase
  fixing:
    max_fix_iterations: 3
    require_unit_tests: true
    prefer_minimal_changes: true

  # Regression testing
  regression:
    run_full_suite: true
    fail_on_regression: true
    run_integration_tests: true

  # Review
  review:
    require_review: true
    check_defensive_coding: true

  # Documentation
  documentation:
    document_root_cause: true # Explain why bug occurred
    update_changelog: true

  output:
    directory: ./bugfix-output
    create_bug_reports: true

# Subagent Configuration
subagents:
  # Tester subagent
  tester:
    auto_detect_framework: true
    capture_coverage: true
    parallel_execution: false
    timeout: 120              # seconds

  # Bug analyzer subagent
  bug_analyzer:
    categorize_failures: true
    suggest_fixes: true
    identify_patterns: true

  # Documenter subagent
  documenter:
    style: comprehensive      # minimal | standard | comprehensive
    include_examples: true
    update_existing: true

# Hook Configuration
hooks:
  # Enable/disable hooks
  enabled: true

  # Which hooks to run
  pre_commit:
    enabled: true
    blocking: true

  post_test:
    enabled: true
    blocking: false

  on_test_failure:
    enabled: true
    create_reports: true

  post_review:
    enabled: true
    auto_fix_style: true

  # Custom hooks directory
  custom_hooks_dir: ./.claude/hooks

# Workflow Configuration
workflows:
  # Parallel execution
  parallel_when_possible: true

  # State management
  save_state: true
  state_directory: ./.claude/workflow-state

  # Error handling
  continue_on_error: false
  max_retries: 3
  retry_delay: 5              # seconds

# Quality Gates
quality_gates:
  # These must pass for workflows to succeed
  tests:
    enabled: true
    min_coverage: 80

  linting:
    enabled: true
    max_errors: 0
    max_warnings: 10

  security:
    enabled: true
    max_critical: 0
    max_high: 0

  performance:
    enabled: false
    max_bundle_size: 500      # KB
    max_load_time: 3          # seconds

# Notification Configuration
notifications:
  enabled: true

  # Notification channels
  channels:
    - console                 # Always enabled
    # - slack                 # Requires setup
    # - email                 # Requires setup

  # What to notify about
  events:
    - workflow_complete
    - workflow_failed
    - critical_issue_found
    - review_approved

# Performance Settings
performance:
  # Caching
  cache_enabled: true
  cache_directory: ./.claude/cache

  # Concurrency
  max_concurrent_tasks: 4

  # Timeouts
  default_timeout: 300        # seconds
  max_timeout: 1800           # 30 minutes

# Development Settings
development:
  # Debug mode
  debug: false
  verbose_logging: false

  # Dry run mode (don't make actual changes)
  dry_run: false

  # Testing
  mock_external_calls: false

# Project-specific Settings
project:
  # Project type
  type: nodejs                # nodejs | python | java | go | etc.

  # Project conventions
  conventions:
    indent: 2                 # spaces
    quotes: single            # single | double
    semicolons: true
    trailing_comma: true

  # Paths
  paths:
    source: ./src
    tests: ./tests
    docs: ./docs
    build: ./dist

  # Testing
  test_command: npm test
  test_framework: jest        # jest | mocha | pytest | etc.

  # Linting
  lint_command: npm run lint
  format_command: npm run format

# Custom Plugin Configuration
# Add your own plugin configurations here
custom:
  # Example: custom deployment plugin
  # deployment:
  #   target: production
  #   strategy: blue-green
